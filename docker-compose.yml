version: '2'

services:
  ldap:
    image: actualys/ldap:1.1
    ports:
      - "1389:389/tcp"
    environment:
      - LDAP_DOMAIN=example.com
      - LDAP_PASSWORD=admin
    volumes:
      - "./openldap/ldap:/var/lib/ldap"
      - "./openldap/slapd.d:/etc/ldap/slapd.d"
#apt-get install slapd ldap-utils wget unzip libnet-ldap-perl
#
#cd /opt/
#wget https://github.com/Evolveum/slapdconf/archive/master.zip
#unzip master.zip
#cd slapdconf-master/
#
#./slapdconf add-module sssvlv
#./slapdconf add-overlay dc=example,dc=com sssvlv
  mysql:
    image: mysql:5.7.20
    ports:
      - "3306:3306/tcp"
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=midpoint
      - MYSQL_USER=midpoint
      - MYSQL_PASSWORD=midpoint
    volumes:
      - "./mysql/conf.d:/etc/mysql/conf.d"
      - "./mysql/mysql:/var/lib/mysql"
  mysql56:
    image: mysql:5.6.39
    ports:
      - "3306:3306/tcp"
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=midpoint
      - MYSQL_USER=midpoint
      - MYSQL_PASSWORD=midpoint
    volumes:
      - "./mysql_5_6/conf.d:/etc/mysql/conf.d"
      - "./mysql_5_6/mysql:/var/lib/mysql"
  mysql8:
    image: mysql:8.0.12
    ports:
    - "3306:3306/tcp"
    environment:
    - MYSQL_ROOT_PASSWORD=root
    - MYSQL_DATABASE=midpoint
    - MYSQL_USER=midpoint
    - MYSQL_PASSWORD=midpoint
    volumes:
    - "./mysql_8/conf.d:/etc/mysql/conf.d"
    - "./mysql_8/mysql:/var/lib/mysql"
  postgres:
    image: postgres:9.5.10
    ports:
      - "5432:5432/tcp"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    volumes:
      - "./postgresql/data:/var/lib/postgresql/data"
  postgres10:
    image: postgres:10.4
    ports:
      - "5432:5432/tcp"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    volumes:
      - "./postgresql_10/data:/var/lib/postgresql/data"
  postgres11:
    image: postgres:11.1
    ports:
      - "5432:5432/tcp"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    volumes:
      - "./postgresql_11/data:/var/lib/postgresql/data"
  postgres12:
    image: postgres:12.1
    ports:
      - "5432:5432/tcp"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    volumes:
      - "./postgresql_12/data:/var/lib/postgresql/data"
  oracle:
    image: truevoly/oracle-12c
    ports:
      - "1521:1521/tcp"
      - "18080:8080/tcp"
    environment:
      - DBCA_TOTAL_MEMORY=2048
      - WEB_CONSOLE=true
    volumes:
      - "./oracle/oracle:/u01/app/oracle"
#      - "oracle:/u01/app/oracle"
    # hostname: localhost
    # port: 1521
    # sid: xe
    # service name: xe
    # username: system
    # password: oracle
    # ---
    # http://localhost:8080/apex
    # workspace: INTERNAL
    # user: ADMIN
    # password: 0Racle$
  sqlserver:
    image: microsoft/mssql-server-linux:2017-CU2
    ports:
      - "1433:1433/tcp"
    environment:
      - ACCEPT_EULA=Y
      - MSSQL_PID=Developer
      - SA_PASSWORD=qwer1234X!
      - MSSQL_MEMORY_LIMIT_MB=2048
    volumes:
      - "mssql:/var/opt/mssql"
#      - "./sqlserver/mssql:/var/opt/mssql" not supported at this time
  mariadb:
    image: mariadb:10.0.28
    ports:
      - "3306:3306/tcp"
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=midpoint
      - MYSQL_USER=midpoint
      - MYSQL_PASSWORD=midpoint
    volumes:
      - "./mariadb_10_0/conf.d:/etc/mysql/conf.d"
      - "./mariadb_10_0/mysql:/var/lib/mysql"
  cas:
    image: apereo/cas:v5.2.2
    ports:
      - "8080:8080/tcp"
      - "8443:8443/tcp"
    volumes:
      - "./cas/cas:/etc/cas"
  ldap1:
    image: actualys/ldap:1.1
    ports:
      - "1389:389/tcp"
    environment:
      - LDAP_DOMAIN=example.com
      - LDAP_PASSWORD=admin
    volumes:
      - "./openldap1/ldap:/var/lib/ldap"
      - "./openldap1/slapd.d:/etc/ldap/slapd.d"
  ldap2:
    image: actualys/ldap:1.1
    ports:
      - "2389:389/tcp"
    environment:
      - LDAP_DOMAIN=example.com
      - LDAP_PASSWORD=admin
    volumes:
      - "./openldap2/ldap:/var/lib/ldap"
      - "./openldap2/slapd.d:/etc/ldap/slapd.d"
volumes:
  mssql:
#  oracle: